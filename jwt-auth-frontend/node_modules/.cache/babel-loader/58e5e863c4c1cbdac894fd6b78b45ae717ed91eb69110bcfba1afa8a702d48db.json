{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import ProjectDetailPage from'./components/ProjectDetail';import AdminLogin from'./components/AdminLogin';import ClientLogin from'./components/ClientLogin';import Dashboard from'./components/Dashboard';import ClientProfile from'./components/ClientProfile';import HomePage from'./components/HomePage';import ContractManagement from'./components/ContractManagement';import ActivityTracking from'./components/ActivityTracking';import Header from'./components/Header';import Footer from'./components/Footer';import ProjectsPage from'./components/ProjectPage';import ClientRegister from'./components/ClientRegister';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const token=localStorage.getItem('jwtToken');// Get token from localStorage\nconst isAuthenticated=!!token;// Check if the user is authenticated\nconst getUserRole=()=>{if(!token)return null;const decodedToken=JSON.parse(atob(token.split('.')[1]));// Decode the JWT\nreturn decodedToken.role;// Extract user role\n};const role=getUserRole();return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin-login\",element:isAuthenticated&&role==='admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/client-login\",element:isAuthenticated&&role==='client'?/*#__PURE__*/_jsx(Navigate,{to:`/client/${role.clientId}`}):/*#__PURE__*/_jsx(ClientLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/client-register\",element:/*#__PURE__*/_jsx(ClientRegister,{})// Add route for registration\n}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated&&role==='admin'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/activity-tracking\",element:isAuthenticated&&role===\"admin\"?/*#__PURE__*/_jsx(ActivityTracking,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/projects\",element:isAuthenticated&&role===\"admin\"?/*#__PURE__*/_jsx(ProjectsPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/project/:projectId\",element:isAuthenticated&&role===\"admin\"?/*#__PURE__*/_jsx(ProjectDetailPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/client/:clientId\",element:isAuthenticated?/*#__PURE__*/_jsx(ClientProfile,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/client-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/contract-management/:clientId\",element:/*#__PURE__*/_jsx(ContractManagement,{})}),/*#__PURE__*/_jsx(Route,{path:\"/activity-tracking\",element:isAuthenticated&&role==='client'?/*#__PURE__*/_jsx(ActivityTracking,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/client-login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(\"h2\",{children:\"404 - Page Not Found\"})})]})]});};export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","ProjectDetailPage","AdminLogin","ClientLogin","Dashboard","ClientProfile","HomePage","ContractManagement","ActivityTracking","Header","Footer","ProjectsPage","ClientRegister","jsx","_jsx","jsxs","_jsxs","App","token","localStorage","getItem","isAuthenticated","getUserRole","decodedToken","JSON","parse","atob","split","role","children","path","element","to","clientId"],"sources":["/Users/harshitrishav/Demo/jwt-auth-frontend/src/App.js"],"sourcesContent":["\nimport React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport ProjectDetailPage from './components/ProjectDetail';\nimport AdminLogin from './components/AdminLogin'\nimport ClientLogin from './components/ClientLogin';\nimport Dashboard from './components/Dashboard';\nimport ClientProfile from './components/ClientProfile';\nimport HomePage from './components/HomePage';\nimport ContractManagement from './components/ContractManagement';\nimport ActivityTracking from './components/ActivityTracking';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport ProjectsPage from './components/ProjectPage';\nimport ClientRegister from './components/ClientRegister';\n\n\nconst App = () => {\n  const token = localStorage.getItem('jwtToken'); // Get token from localStorage\n  const isAuthenticated = !!token; // Check if the user is authenticated\n\n  const getUserRole = () => {\n    if (!token) return null;\n    const decodedToken = JSON.parse(atob(token.split('.')[1])); // Decode the JWT\n    return decodedToken.role; // Extract user role\n  };\n\n  const role = getUserRole();\n\n  return (\n    <Router>\n      <Header />\n      <Routes>\n        {/* Public Routes */}\n        <Route path=\"/\" element={<HomePage />} />\n        <Route\n          path=\"/admin-login\"\n          element={isAuthenticated && role === 'admin' ? <Navigate to=\"/dashboard\" /> : <AdminLogin />}\n        />\n        <Route\n          path=\"/client-login\"\n          element={isAuthenticated && role === 'client' ? <Navigate to={`/client/${role.clientId}`} /> : <ClientLogin />}\n        />\n         <Route\n          path=\"/client-register\"\n          element={<ClientRegister />} // Add route for registration\n        />\n\n        {/* Protected Routes */}\n        <Route\n          path=\"/dashboard\"\n          element={isAuthenticated && role === 'admin' ? <Dashboard /> : <Navigate to=\"/admin-login\" />}\n        />\n          <Route\n          path=\"/activity-tracking\"\n          element={\n            isAuthenticated && role === \"admin\" ? (\n              <ActivityTracking />\n            ) : (\n              <Navigate to=\"/admin-login\" />\n            )\n          }\n        />\n         <Route\n              path=\"/admin/projects\"\n              element={\n                isAuthenticated && role === \"admin\" ? (\n                  <ProjectsPage />\n                ) : (\n                  <Navigate to=\"/admin-login\" />\n                )\n              }\n            />\n            <Route\n              path=\"/project/:projectId\"\n              element={\n                isAuthenticated && role === \"admin\" ? (\n                  <ProjectDetailPage />\n                ) : (\n                  <Navigate to=\"/admin-login\" />\n                )\n              }\n            />\n         {/* <Route path=\"/project/:projectId\" component={ProjectDetailPage} /> */}\n        <Route\n          path=\"/client/:clientId\"\n          element={isAuthenticated ? <ClientProfile /> : <Navigate to=\"/client-login\" />}\n        />\n       <Route path=\"/contract-management/:clientId\" element={<ContractManagement />} />\n        <Route\n          path=\"/activity-tracking\"\n          element={isAuthenticated && role === 'client' ? <ActivityTracking /> : <Navigate to=\"/client-login\" />}\n        />\n        \n        {/* Fallback Route */}\n        <Route path=\"*\" element={<h2>404 - Page Not Found</h2>} />\n      </Routes>\n      {/* <Footer /> */}\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,CAAAC,iBAAiB,KAAM,4BAA4B,CAC1D,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CACtD,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,kBAAkB,KAAM,iCAAiC,CAChE,MAAO,CAAAC,gBAAgB,KAAM,+BAA+B,CAC5D,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,YAAY,KAAM,0BAA0B,CACnD,MAAO,CAAAC,cAAc,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGzD,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAE;AAChD,KAAM,CAAAC,eAAe,CAAG,CAAC,CAACH,KAAK,CAAE;AAEjC,KAAM,CAAAI,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAI,CAACJ,KAAK,CAAE,MAAO,KAAI,CACvB,KAAM,CAAAK,YAAY,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACR,KAAK,CAACS,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AAC5D,MAAO,CAAAJ,YAAY,CAACK,IAAI,CAAE;AAC5B,CAAC,CAED,KAAM,CAAAA,IAAI,CAAGN,WAAW,CAAC,CAAC,CAE1B,mBACEN,KAAA,CAACnB,MAAM,EAAAgC,QAAA,eACLf,IAAA,CAACL,MAAM,GAAE,CAAC,cACVO,KAAA,CAAClB,MAAM,EAAA+B,QAAA,eAELf,IAAA,CAACf,KAAK,EAAC+B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEjB,IAAA,CAACR,QAAQ,GAAE,CAAE,CAAE,CAAC,cACzCQ,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,cAAc,CACnBC,OAAO,CAAEV,eAAe,EAAIO,IAAI,GAAK,OAAO,cAAGd,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,YAAY,CAAE,CAAC,cAAGlB,IAAA,CAACZ,UAAU,GAAE,CAAE,CAC9F,CAAC,cACFY,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,eAAe,CACpBC,OAAO,CAAEV,eAAe,EAAIO,IAAI,GAAK,QAAQ,cAAGd,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAE,WAAWJ,IAAI,CAACK,QAAQ,EAAG,CAAE,CAAC,cAAGnB,IAAA,CAACX,WAAW,GAAE,CAAE,CAChH,CAAC,cACDW,IAAA,CAACf,KAAK,EACL+B,IAAI,CAAC,kBAAkB,CACvBC,OAAO,cAAEjB,IAAA,CAACF,cAAc,GAAE,CAAG;AAAA,CAC9B,CAAC,cAGFE,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,YAAY,CACjBC,OAAO,CAAEV,eAAe,EAAIO,IAAI,GAAK,OAAO,cAAGd,IAAA,CAACV,SAAS,GAAE,CAAC,cAAGU,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,cAAc,CAAE,CAAE,CAC/F,CAAC,cACAlB,IAAA,CAACf,KAAK,EACN+B,IAAI,CAAC,oBAAoB,CACzBC,OAAO,CACLV,eAAe,EAAIO,IAAI,GAAK,OAAO,cACjCd,IAAA,CAACN,gBAAgB,GAAE,CAAC,cAEpBM,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,cAAc,CAAE,CAEhC,CACF,CAAC,cACDlB,IAAA,CAACf,KAAK,EACD+B,IAAI,CAAC,iBAAiB,CACtBC,OAAO,CACLV,eAAe,EAAIO,IAAI,GAAK,OAAO,cACjCd,IAAA,CAACH,YAAY,GAAE,CAAC,cAEhBG,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,cAAc,CAAE,CAEhC,CACF,CAAC,cACFlB,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,qBAAqB,CAC1BC,OAAO,CACLV,eAAe,EAAIO,IAAI,GAAK,OAAO,cACjCd,IAAA,CAACb,iBAAiB,GAAE,CAAC,cAErBa,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,cAAc,CAAE,CAEhC,CACF,CAAC,cAENlB,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,mBAAmB,CACxBC,OAAO,CAAEV,eAAe,cAAGP,IAAA,CAACT,aAAa,GAAE,CAAC,cAAGS,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,eAAe,CAAE,CAAE,CAChF,CAAC,cACHlB,IAAA,CAACf,KAAK,EAAC+B,IAAI,CAAC,gCAAgC,CAACC,OAAO,cAAEjB,IAAA,CAACP,kBAAkB,GAAE,CAAE,CAAE,CAAC,cAC/EO,IAAA,CAACf,KAAK,EACJ+B,IAAI,CAAC,oBAAoB,CACzBC,OAAO,CAAEV,eAAe,EAAIO,IAAI,GAAK,QAAQ,cAAGd,IAAA,CAACN,gBAAgB,GAAE,CAAC,cAAGM,IAAA,CAACd,QAAQ,EAACgC,EAAE,CAAC,eAAe,CAAE,CAAE,CACxG,CAAC,cAGFlB,IAAA,CAACf,KAAK,EAAC+B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEjB,IAAA,OAAAe,QAAA,CAAI,sBAAoB,CAAI,CAAE,CAAE,CAAC,EACpD,CAAC,EAEH,CAAC,CAEb,CAAC,CAED,cAAe,CAAAZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}